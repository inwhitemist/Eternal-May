import{r as i,j as e,D as N,L as u,S as m,B as g,X as w,I as d}from"./index-DPLIgXdU.js";function C({open:l,mode:a,onClose:r,onSuccess:j,login:v,register:b}){const[t,n]=i.useState({email:"",password:"",invite:""}),[o,y]=i.useState(!1),[x,p]=i.useState(!1),[h,c]=i.useState(null);i.useEffect(()=>{c(null)},[a,l]);async function f(){p(!0),c(null);try{a==="login"?await v(t.email,t.password):await b(t.email,t.password,t.invite||void 0),j(),r()}catch(s){c((s==null?void 0:s.message)||"–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏")}finally{p(!1)}}return l?e.jsxs(N,{open:l,onClose:r,children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-3 border-b border-black/10 bg-white/95 px-4 py-3 dark:border-white/10 dark:bg-neutral-900/95 rounded-t-2xl",children:[e.jsx("div",{className:"flex items-center gap-2 text-lg font-semibold",children:a==="login"?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:18})," –í—Ö–æ–¥"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{size:18})," –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"]})}),e.jsx(g,{variant:"ghost",onClick:r,children:e.jsx(w,{size:18})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"Email"}),e.jsx(d,{type:"email",placeholder:"you@example.com",value:t.email,onChange:s=>n({...t,email:s.target.value})})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"–ü–∞—Ä–æ–ª—å"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:o?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:t.password,onChange:s=>n({...t,password:s.target.value}),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>y(s=>!s),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs opacity-70 hover:opacity-100",children:o?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å"})]}),e.jsx("p",{className:"text-[11px] opacity-60",children:"–ú–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤"})]}),a==="register"&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"–ò–Ω–≤–∞–π—Ç-–∫–æ–¥ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)"}),e.jsx(d,{placeholder:"–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ",value:t.invite,onChange:s=>n({...t,invite:s.target.value})})]}),h&&e.jsx("div",{className:"rounded-xl border border-red-200/60 bg-red-50/80 px-3 py-2 text-xs text-red-700 dark:border-red-900/40 dark:bg-red-900/20 dark:text-red-300",children:h}),e.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[e.jsx("button",{type:"button",className:"text-xs opacity-70 hover:opacity-100 underline underline-offset-4",onClick:()=>{alert("–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è üôÇ")},children:"–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"}),e.jsx("span",{className:"text-xs opacity-70"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs opacity-70",children:[a==="login"?"–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?":"–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?"," ",e.jsx("button",{className:"underline underline-offset-4 hover:opacity-100 opacity-80",onClick:()=>{const s=new CustomEvent("switch-auth-mode",{detail:a==="login"?"register":"login"});window.dispatchEvent(s)},children:a==="login"?"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å":"–í–æ–π—Ç–∏"})]}),e.jsx(g,{onClick:f,disabled:x,children:x?"...":a==="login"?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:16})," –í–æ–π—Ç–∏"]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{size:16})," –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"]})})]})]})]}):null}export{C as default};
