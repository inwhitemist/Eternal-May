import{r as i,j as e,D as N,L as h,S as u,B as g,X as w,I as d}from"./index-BasCRiea.js";function C({open:l,mode:t,onClose:n,onSuccess:j,login:v,register:y}){const[s,c]=i.useState({email:"",password:"",accessCode:"",adminInvite:""}),[o,b]=i.useState(!1),[x,m]=i.useState(!1),[p,r]=i.useState(null);i.useEffect(()=>{r(null)},[t,l]);async function f(){if(t==="register"&&!s.accessCode.trim()){r("–í–≤–µ–¥–∏—Ç–µ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");return}m(!0),r(null);try{t==="login"?await v(s.email,s.password):await y(s.email,s.password,s.accessCode.trim(),s.adminInvite.trim()?s.adminInvite.trim():void 0),j(),n()}catch(a){r((a==null?void 0:a.message)||"–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏")}finally{m(!1)}}return l?e.jsxs(N,{open:l,onClose:n,children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between gap-3 border-b border-black/10 bg-white/95 px-4 py-3 dark:border-white/10 dark:bg-neutral-900/95 rounded-t-2xl",children:[e.jsx("div",{className:"flex items-center gap-2 text-lg font-semibold",children:t==="login"?e.jsxs(e.Fragment,{children:[e.jsx(h,{size:18})," –í—Ö–æ–¥"]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{size:18})," –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"]})}),e.jsx(g,{variant:"ghost",onClick:n,children:e.jsx(w,{size:18})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"Email"}),e.jsx(d,{type:"email",placeholder:"you@example.com",value:s.email,onChange:a=>c({...s,email:a.target.value})})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"–ü–∞—Ä–æ–ª—å"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:o?"text":"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:s.password,onChange:a=>c({...s,password:a.target.value}),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>b(a=>!a),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs opacity-70 hover:opacity-100",children:o?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å"})]}),e.jsx("p",{className:"text-[11px] opacity-60",children:"–ú–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤"})]}),t==="register"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid gap-1",children:[e.jsx("label",{className:"text-xs opacity-70",children:"–ò–Ω–≤–∞–π—Ç-–∫–æ–¥ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)"}),e.jsx(d,{placeholder:"–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞",value:s.accessCode,onChange:a=>c({...s,accessCode:a.target.value})}),e.jsx("p",{className:"text-[11px] opacity-60",children:"–ü–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ —É –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞"})]})}),p&&e.jsx("div",{className:"rounded-xl border border-red-200/60 bg-red-50/80 px-3 py-2 text-xs text-red-700 dark:border-red-900/40 dark:bg-red-900/20 dark:text-red-300",children:p}),e.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[e.jsx("button",{type:"button",className:"text-xs opacity-70 hover:opacity-100 underline underline-offset-4",onClick:()=>{alert("–°–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è üôÇ")},children:"–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"}),e.jsx("span",{className:"text-xs opacity-70"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs opacity-70",children:[t==="login"?"–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?":"–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?"," ",e.jsx("button",{className:"underline underline-offset-4 hover:opacity-100 opacity-80",onClick:()=>{const a=new CustomEvent("switch-auth-mode",{detail:t==="login"?"register":"login"});window.dispatchEvent(a)},children:t==="login"?"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å":"–í–æ–π—Ç–∏"})]}),e.jsx(g,{onClick:f,disabled:x||t==="register"&&!s.accessCode.trim(),children:x?"...":t==="login"?e.jsxs(e.Fragment,{children:[e.jsx(h,{size:16})," –í–æ–π—Ç–∏"]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{size:16})," –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"]})})]})]})]}):null}export{C as default};
